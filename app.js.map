{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/engine/template.js","webpack:///./src/js/engine/stateService.js","webpack:///./src/js/data/formErrors.js","webpack:///./src/js/engine/trello.js","webpack:///./src/js/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","templateCard","data","card","document","createElement","classList","add","dataset","cardId","id","innerHTML","text","StateService","getCards","JSON","parse","localStorage","getItem","saveCards","setItem","stringify","valueMissing","Trello","constructor","this","stateService","init","wrapper","loadFromJSON","json","body","append","closeAllForms","querySelectorAll","forEach","element","addCardListeners","addFooterListeners","addWrapperListeners","addEventListener","event","preventDefault","target","querySelector","remove","deleteCard","closest","dragStart","dragMove","dragEnd","draggedCard","ghostCard","cloneNode","width","height","left","top","getBoundingClientRect","style","appendChild","cursor","coordX","pageX","coordY","pageY","column","elementFromPoint","clientX","clientY","before","after","saveState","addNewCardFormShow","group","newForm","task","templateAddCardForm","addNewCardFormClose","createNewCard","focus","form","forms","error","checkValidity","elements","filter","validity","valid","contains","el","first","find","ValidityState","errorKey","className","textContent","FORM_ERRORS","offsetParent","offsetTop","offsetHeight","offsetLeft","offsetWidth","newCard","Date","getTime","replace","container","item","newCol","cardsColumn","cardsList","entries"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","function cardsColumn(data) {\n  const column = document.createElement('div');\n  column.classList.add('cards-column');\n  column.dataset.group = data;\n  column.innerHTML = `\n    <div class=\"container__header\">\n      <span class=\"container__header-text\">${data}</span>\n    </div>\n\n    <div class=\"cards-container\">\n      <ul class=\"cards-list\">\n      </ul>\n    </div>\n\n    <div class=\"container__footer\">\n      <span class=\"container__footer-text\">+</span>&nbsp;\n      <span class=\"container__footer-text\">Add another card</span>\n    </div>\n  `;\n  return column;\n}\n\nfunction templateCard(data) {\n  const card = document.createElement('li');\n  card.classList.add('card');\n  card.dataset.cardId = data.id;\n  card.innerHTML = `\n    <div class=\"card-header\">\n      <span class=\"card-text\">${data.text}</span>\n      <span class=\"card-delete visually-hidden\">&#67755</span>\n    </div>\n  `;\n  return card;\n}\n\nfunction templateAddCardForm(data) {\n  const task = document.createElement('li');\n  task.classList.add('cardForm');\n  task.innerHTML = `\n    <form name=\"${data}\" novalidate class=\"form\">\n      <textarea class=\"form__input card\" type=\"text\" name=\"name\" data-group=\"${data}\" value=\"\" required placeholder=\"Enter a title for this card...\"></textarea>\n      <div class=\"form__input-button-holder\">\n        <button type=\"submit\" class=\"btn btn-green\">Add Card</button>\n        <span class=\"icon-cancel\">&#67755;</span>\n      </div>\n    </form>\n  `;\n  return task;\n}\n\nexport { cardsColumn, templateCard, templateAddCardForm };\n","/* eslint-disable class-methods-use-this */\nexport default class StateService {\n  getCards() {\n    return JSON.parse(localStorage.getItem('cards')) || null;\n  }\n\n  saveCards(data) {\n    localStorage.setItem('cards', JSON.stringify(data));\n  }\n}\n","const FORM_ERRORS = {\n  name: {\n    valueMissing: 'Add card name, please',\n  },\n};\n\nexport default { FORM_ERRORS };\n","/* eslint-disable no-param-reassign */\n/* eslint-disable class-methods-use-this */\nimport { cardsColumn, templateCard, templateAddCardForm } from './template';\nimport StateService from './stateService';\nimport json from '../data/cards.json';\nimport FORM_ERRORS from '../data/formErrors';\n\nexport default class Trello {\n  constructor() {\n    this.stateService = new StateService();\n  }\n\n  init() {\n    this.wrapper = document.createElement('div');\n    this.wrapper.classList.add('wrapper');\n    this.wrapper.innerHTML = this.stateService.getCards() || this.loadFromJSON(json);\n    document.body.append(this.wrapper);\n    this.closeAllForms();\n\n    [...this.wrapper.querySelectorAll('.card')].forEach((element) => {\n      this.addCardListeners(element);\n    });\n\n    this.addFooterListeners();\n    this.addWrapperListeners();\n  }\n\n  /**\n   * Add listeners to the card element (now only delete-icon)\n   * @param {Element} element\n   */\n  addCardListeners(element) {\n    element.addEventListener(\n      'mouseenter',\n      (event) => {\n        event.preventDefault();\n        event.target.querySelector('.card-delete').classList.remove('visually-hidden');\n      },\n      false\n    );\n    element.addEventListener(\n      'mouseleave',\n      (event) => {\n        event.preventDefault();\n        event.target.querySelector('.card-delete').classList.add('visually-hidden');\n      },\n      false\n    );\n    element.querySelector('.card-delete').addEventListener(\n      'click',\n      (event) => {\n        event.preventDefault();\n        this.deleteCard(event.target.closest('li.card'));\n      },\n      false\n    );\n  }\n\n  /**\n   * Adds DnD listeners to the container\n   */\n  addWrapperListeners() {\n    const element = this.wrapper;\n\n    element.addEventListener(\n      'mousedown',\n      (event) => {\n        event.preventDefault();\n        this.dragStart(event);\n      },\n      false\n    );\n\n    element.addEventListener(\n      'mousemove',\n      (event) => {\n        event.preventDefault();\n        this.dragMove(event);\n      },\n      false\n    );\n\n    element.addEventListener(\n      'mouseup',\n      (event) => {\n        event.preventDefault();\n        this.dragEnd(event);\n      },\n      false\n    );\n\n    element.addEventListener(\n      'mouseleave',\n      (event) => {\n        event.preventDefault();\n        this.dragEnd();\n      },\n      false\n    );\n  }\n\n  /**\n   * Catches card for dragggin\n   * @param {Object} event\n   * @returns undefined if fails\n   */\n  dragStart(event) {\n    this.draggedCard = event.target.closest('li.card');\n    if (!this.draggedCard) {\n      return;\n    }\n\n    this.ghostCard = this.draggedCard.cloneNode(true);\n    this.ghostCard.classList.add('draggedGhost');\n    this.draggedCard.classList.add('transparent');\n\n    const { width, height, left, top } = this.draggedCard.getBoundingClientRect();\n    this.ghostCard.style.width = `${width}px`;\n    this.ghostCard.style.height = `${height}px`;\n    this.ghostCard.style.top = `${top}px`;\n    this.ghostCard.style.left = `${left}px`;\n\n    document.body.appendChild(this.ghostCard);\n\n    this.wrapper.style.cursor = 'grabbing';\n    this.coordX = event.pageX - left;\n    this.coordY = event.pageY - top;\n  }\n\n  /**\n   * Renders move of the draggin card\n   * @param {Object} event\n   * @returns undefined if fails\n   */\n  dragMove(event) {\n    if (!this.ghostCard) {\n      return;\n    }\n    this.ghostCard.style.left = `${event.pageX - this.coordX}px`;\n    this.ghostCard.style.top = `${event.pageY - this.coordY}px`;\n    const column = document\n      .elementFromPoint(event.clientX, event.clientY)\n      .closest('div.cards-column');\n    if (column) {\n      const { height, top } = this.draggedCard.getBoundingClientRect();\n      const closest = document.elementFromPoint(event.clientX, event.clientY).closest('li.card');\n      if (!closest) {\n        column.querySelector('ul.cards-list').append(this.draggedCard);\n        return;\n      }\n      if (event.pageY < top - height / 2) {\n        closest.before(this.draggedCard);\n      } else {\n        closest.after(this.draggedCard);\n      }\n    }\n  }\n\n  /**\n   * Drops the draggin card into the new position\n   * @returns undefined if fails\n   */\n  dragEnd() {\n    if (!this.draggedCard) {\n      if (this.ghostCard) {\n        this.ghostCard.remove();\n        this.ghostCard = null;\n      }\n      return;\n    }\n\n    this.wrapper.style.cursor = 'default';\n    this.draggedCard.classList.remove('transparent');\n    this.draggedCard = null;\n    this.ghostCard.remove();\n    this.ghostCard = null;\n    this.saveState();\n  }\n\n  /**\n   * Adds listener to all footers on the board\n   */\n  addFooterListeners() {\n    [...document.querySelectorAll('.container__footer')].forEach((element) => {\n      element.addEventListener(\n        'click',\n        (event) => {\n          event.preventDefault();\n          this.addNewCardFormShow(event.target.closest('.cards-column').dataset.group);\n        },\n        false\n      );\n      element.addEventListener(\n        'mouseenter',\n        (event) => {\n          event.preventDefault();\n          event.target\n            .querySelector('.container__footer-text:nth-child(2)')\n            .classList.add('container__footer-text_active');\n        },\n        false\n      );\n      element.addEventListener(\n        'mouseleave',\n        (event) => {\n          event.preventDefault();\n          event.target\n            .querySelector('.container__footer-text:nth-child(2)')\n            .classList.remove('container__footer-text_active');\n        },\n        false\n      );\n    });\n  }\n\n  /**\n   * Shows add new card form and bind its listeners\n   * @param {String} group - column name\n   */\n  addNewCardFormShow(group) {\n    const column = document.querySelector(`div[data-group=\"${group}\"]`);\n\n    column.querySelector(`.container__footer`).classList.add('visually-hidden');\n\n    const newForm = templateAddCardForm(group);\n    column.querySelector(`.cards-list`).append(newForm);\n\n    newForm.querySelector(`.icon-cancel`).addEventListener(\n      'click',\n      (event) => {\n        event.preventDefault();\n        this.addNewCardFormClose(group);\n      },\n      false\n    );\n    newForm.querySelector(`.btn`).addEventListener(\n      'click',\n      (event) => {\n        event.preventDefault();\n        const data = {\n          group,\n          value: column.querySelector(`.form__input`).value,\n        };\n        this.createNewCard(data);\n      },\n      false\n    );\n\n    this.wrapper.addEventListener(\n      'click',\n      (event) => {\n        event.preventDefault();\n        if (event.target === this.wrapper) {\n          this.closeAllForms();\n        }\n      },\n      false\n    );\n\n    //! обработчик ктрл+ввод быстро не завёлся, отложил\n    // newForm.querySelector(`.form__input`).addEventListener(\n    //   'keydown',\n    //   (e) => {\n    // e.preventDefault();\n    //     console.log(e.key);\n    //     if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {\n    //       const data = {\n    //         group,\n    //         value: column.querySelector(`.form__input`).value,\n    //       };\n    //       this.createNewCard(data);\n    //     }\n    //   },\n    //   false\n    // );\n\n    newForm.querySelector(`.form__input`).focus();\n  }\n\n  /**\n   * Creates new card in DB and redraws the board\n   * @param {String} data - text value for new card\n   */\n  createNewCard(data) {\n    const form = document.forms[data.group];\n    let { error } = this;\n\n    // old error removing\n    if (error) {\n      error.remove();\n      error = null;\n    }\n    // check validity code\n    const isValid = form.checkValidity();\n\n    if (!isValid) {\n      // switch .invalid on all valid elements to .valid\n      [...form.elements]\n        .filter((o) => o.validity.valid && !o.classList.contains('btn'))\n        .forEach((el) => {\n          el.classList.add('valid');\n          el.classList.remove('invalid');\n        });\n\n      const first = [...form.elements].find((o) => !o.validity.valid);\n      first.focus();\n      first.classList.remove('valid');\n      first.classList.add('invalid');\n\n      const ValidityState = first.validity;\n      let errorKey = 'Неизвестная ошибка';\n\n      for (const key in ValidityState) {\n        if (ValidityState[key]) {\n          errorKey = key;\n        }\n      }\n\n      error = document.createElement('div');\n      error.dataset.id = 'error';\n      error.dataset.group = data.group;\n      error.className = 'form-error';\n      error.textContent = `${FORM_ERRORS.FORM_ERRORS[first.name][errorKey]}`;\n\n      // for relative positioning inside container\n      first.offsetParent.appendChild(error);\n      error.style.top = `${first.offsetTop + first.offsetHeight + 10}px`;\n      error.style.left = `${first.offsetLeft + first.offsetWidth - error.offsetWidth - 10}px`;\n      this.error = error;\n      return;\n    }\n\n    const newCard = templateCard({\n      id: `${new Date().getTime()}`,\n      text: data.value.replace(/\\n/g, '<br>'),\n    });\n    this.addNewCardFormClose(data.group);\n    const column = this.wrapper.querySelector(`div.cards-column[data-group=\"${data.group}\"]`);\n    column.querySelector('.cards-list').append(newCard);\n\n    this.addCardListeners(newCard);\n    this.saveState();\n  }\n\n  /**\n   * Closes all new card forms\n   */\n  closeAllForms() {\n    [...document.querySelectorAll(`li.cardForm`)].forEach((element) => {\n      this.addNewCardFormClose(element.closest('div.cards-column').dataset.group);\n    });\n  }\n\n  /**\n   * Closes new card form\n   * @param {String} group - column name\n   */\n  addNewCardFormClose(group) {\n    const column = document.querySelector(`div[data-group=\"${group}\"]`);\n    column.querySelector(`.container__footer`).classList.remove('visually-hidden');\n    column.querySelector(`li.cardForm`).remove();\n    [...document.querySelectorAll(`div.form-error[data-group=\"${group}\"]`)].forEach((el) =>\n      el.remove()\n    );\n  }\n\n  /**\n   * Removes card from the DOM\n   * @param {Element} element - element to remove\n   */\n  deleteCard(element) {\n    element.remove();\n    this.saveState();\n  }\n\n  /**\n   * Saves state into Local Storage\n   */\n  saveState() {\n    this.stateService.saveCards(document.querySelector('.wrapper').innerHTML);\n  }\n\n  /**\n   * Constructs state from JSON object\n   * @param {Object} data\n   * @returns state innerHTML\n   */\n  loadFromJSON(data) {\n    const container = document.createElement('div');\n    data.forEach((item) => {\n      const newCol = cardsColumn(item.id);\n      const cardsList = newCol.querySelector('.cards-list');\n      item.entries.forEach((card) => {\n        const newCard = templateCard(card);\n        cardsList.append(newCard);\n      });\n      container.append(newCol);\n    });\n    return container.innerHTML;\n  }\n}\n","import Trello from './engine/trello';\n\nexport default function app() {\n  const trello = new Trello();\n  trello.init();\n}\n\napp();\n"],"sourceRoot":""}